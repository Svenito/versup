steps:
    test:
        image: python:${TAG}-slim-bullseye
        when:
            event: push
        commands:
            - apt-get update
            - apt-get install -y git
            - python -m pip install --upgrade pip
            - pip install uv
            - uv sync --all-extras --dev
            - uv run pytest src/tests

depends_on:
    - lint
    - format
    - mypy

matrix:
    TAG:
        - 3.10
        - 3.11
        - 3.12

